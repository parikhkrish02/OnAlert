{% extends 'basic.html' %}

{% load static %}

{% block body %}

{% if contests|length != 0 %}

{% block style %}
<style>
  body{
    background-color: black;
  }
</style>
{% endblock style %}

  <div id="demo" class="carousel slide" data-ride="carousel">
    <ul class="carousel-indicators">
      <li data-target="#demo" data-slide-to="0" class="active"></li>
      <li data-target="#demo" data-slide-to="1"></li>
      <li data-target="#demo" data-slide-to="2"></li>
      <li data-target="#demo" data-slide-to="3"></li>
      <li data-target="#demo" data-slide-to="4"></li>
    </ul>

    <div class="carousel-inner">
      <div class="carousel-item active">
        {% if contests.0.platform.platform_name == "CodeChef" %}
        <img src="/static/images/Blue Dynamic Fashion Special Sale Banner.png" alt="Los Angeles" width="1100" height="500" />
        {% endif %}
        {% if contests.0.platform.platform_name == "CodeForces" %}
        <img src="/static/images/Blue Dynamic Fashion Special Sale Banner.png" alt="Los Angeles" width="1100" height="500" />
        {% endif %}
        {% if contests.0.platform.platform_name == "AtCoder" %}
        <img src="{% static 'images/atcoderbanner.png' %}" alt="Los Angeles" width="1100" height="500" />
        {% endif %}
        <div class="carousel-caption">
          <div class="loggin">
            <div class="form-structor" id="login-form">
              <div class="signup">
                <h2 class="form-title" id="signup"><span>or</span>Sign up</h2>
                <div class="form-holder">
                  <input type="text" class="input" placeholder="Name" />
                  <input type="email" class="input" placeholder="Email" />
                  <input type="password" class="input" placeholder="Password" />
                </div>
                <button class="submit-btn">Sign up</button>
              </div>
              <div class="login slide-up">
                <div class="center">
                  <h2 class="form-title" id="login"><span>or</span>Log in</h2>
                  <div class="form-holder">
                    <input type="email" class="input" placeholder="Email" />
                    <input type="password" class="input" placeholder="Password" />
                  </div>
                  <button class="submit-btn">Log in</button>
                </div>
              </div>
            </div>
          </div>
          <h3><a href="{{contests.0.contest_link}}" target="on_blank">{{contests.0.contest}}</a></h3>
          <p>{{contests.0.when}}</p>
          <p>{{contests.0.duration}} Hrs.</p>
        </div>
      </div>

      {% for contest in contests|slice:'1:' %}
      <div class="carousel-item ">
        {% if contest.platform.platform_name == "CodeChef" %}
        <img src="/static/images/Blue Dynamic Fashion Special Sale Banner.png" alt="Los Angeles" width="1100" height="500" />
        {% endif %}
        {% if contest.platform.platform_name == "CodeForces" %}
        <img src="/static/images/Blue Dynamic Fashion Special Sale Banner.png" alt="Los Angeles" width="1100" height="500" />
        {% endif %}
        {% if contest.platform.platform_name == "AtCoder" %}
        <img src="{% static 'images/atcoderbanner.png' %}" alt="Los Angeles" width="1100" height="500" />
        {% endif %}
          
        <div class="carousel-caption">
          <div class="loggin">
            <div class="form-structor" id="login-form">
              <div class="signup">
                <h2 class="form-title" id="signup"><span>or</span>Sign up</h2>
                <div class="form-holder">
                  <input type="text" class="input" placeholder="Name" />
                  <input type="email" class="input" placeholder="Email" />
                  <input type="password" class="input" placeholder="Password" />
                </div>
                <button class="submit-btn">Sign up</button>
              </div>
              <div class="login slide-up">
                <div class="center">
                  <h2 class="form-title" id="login"><span>or</span>Log in</h2>
                  <div class="form-holder">
                    <input type="email" class="input" placeholder="Email" />
                    <input type="password" class="input" placeholder="Password" />
                  </div>
                  <button class="submit-btn">Log in</button>
                </div>
              </div>
            </div>
          </div>
          <h3><a href="{{contest.contest_link}}" target="on_blank">{{contest.contest}}</a></h3>
          <p>{{contest.when}}</p>
          <p>{{contest.duration}} Hrs.</p>
        </div>
      </div>
      {% endfor %}
    </div>
    <a class="carousel-control-prev" id="next1" href="#demo" data-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </a>
    <a class="carousel-control-next" id="next1" href="#demo" data-slide="next">
      <span class="carousel-control-next-icon"></span>
    </a>
  </div>

  {% else %}
  <div class="no-content" >
    <h3  style="margin-left: 500px; margin-top: 200px; margin-bottom: 100px; color: white;">No Contests Available, Try Refreshing Data</h3>
  </div>

  {% endif %}

{% endblock body %}

{% block script %}

  <script>
    document
      .getElementById("login-btn")
      .addEventListener("click", function () {
        document.querySelector("login-form").style.display = "flex";
      });
  </script>
  <!-- <script>
  var modal = document.getElementById('login-form');
  window.onclick = function(event) 
  {
      if (event.target == modal) 
      {
          modal.style.display = "none";
      }
  }
  </script> -->
  <script>
    console.clear();

    const loginBtn = document.getElementById("login");
    const signupBtn = document.getElementById("signup");

    loginBtn.addEventListener("click", (e) => {
      let parent = e.target.parentNode.parentNode;
      Array.from(e.target.parentNode.parentNode.classList).find((element) => {
        if (element !== "slide-up") {
          parent.classList.add("slide-up");
        } else {
          signupBtn.parentNode.classList.add("slide-up");
          parent.classList.remove("slide-up");
        }
      });
    });

    signupBtn.addEventListener("click", (e) => {
      let parent = e.target.parentNode;
      Array.from(e.target.parentNode.classList).find((element) => {
        if (element !== "slide-up") {
          parent.classList.add("slide-up");
        } else {
          loginBtn.parentNode.parentNode.classList.add("slide-up");
          parent.classList.remove("slide-up");
        }
      });
    });
  </script>

{% endblock script %}
